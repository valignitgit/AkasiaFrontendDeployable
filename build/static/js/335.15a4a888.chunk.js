"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[335],{8459:function(e,r){r.Z={addPortfolio__formContainer:"styles_addPortfolio__formContainer__BQkDL",addPortfolio__formStyles:"styles_addPortfolio__formStyles__1T1tY",addPortfolio__formHeading:"styles_addPortfolio__formHeading__uavYS",addPortfolio__errorContainer:"styles_addPortfolio__errorContainer__xvp6I",addPortfolio__tableErrors:"styles_addPortfolio__tableErrors__yZP6E"}},4330:function(e,r){r.Z={addSecurityTable__heading:"styles_addSecurityTable__heading__y6exQ",addSecurityTable__Container:"styles_addSecurityTable__Container__yL4sA",addSecurityTable__form:"styles_addSecurityTable__form__JVmgi",addSecurityTable_selectInput:"styles_addSecurityTable_selectInput__rQafq",addSecurityTable_textInput:"styles_addSecurityTable_textInput__RHBTw",addSecurityTable__addBtn:"styles_addSecurityTable__addBtn__uDhq0"}},335:function(e,r,t){t.r(r),t.d(r,{default:function(){return J}});var a=t(4165),n=t(3366);function i(e,r){if(null==e)return{};var t,a,i=(0,n.Z)(e,r);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)t=o[a],r.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(i[t]=e[t])}return i}var o=t(5861),l=t(4942),s=t(1413),c=t(9439),d=t(8391),u=t(774),_=t(8773),g=t(5536),h=t(2600),f=t(461),m=t(5590),p=t(7378),Z=t(2872),y=t(7816),x=t(9856),v=t(8743),j=t(7349),S=t(1884),C=t(7236),b=t(6040),w=t(2763),k=t(747),M=t(7067),P=t(3433),N=t(1717),T=t(2557),F=t(8296),L=t(483),I=t(4062),D=t(3387),E=t(125),W=t(3514),A=t(6163),O=t(9222),B=t(5866),q=t(3712),H=function(e){var r=e.handleEditFormChange,t=e.editFormData,a=e.handleEditFormSubmit,n=e.handleCancelClick,i=e.securityOptions;return(0,q.jsxs)(L.Z,{children:[(0,q.jsx)(I.Z,{align:"center",children:(0,q.jsxs)(Z.Z,{sx:{width:"250px"},children:[(0,q.jsx)(y.Z,{htmlFor:"name-multiple",children:"Security"}),(0,q.jsx)(x.Z,{name:"security_id",value:t.security_id,onChange:r,label:"Security",children:i.map((function(e){return(0,q.jsx)(v.Z,{value:e.security_id,children:"".concat(e.security_id," - ").concat(e.security_name)},e.security_id)}))})]})}),(0,q.jsx)(I.Z,{align:"center",children:(0,q.jsx)(p.Z,{fullWidth:!0,name:"weightage_pct",value:t.weightage_pct,onChange:r,placeholder:"Weightage",sx:{width:"100px"}})}),(0,q.jsx)(I.Z,{align:"center",children:(0,q.jsxs)(q.Fragment,{children:[(0,q.jsx)(B.Z,{onClick:function(e){return a(e)},children:(0,q.jsx)(O.Z,{})}),(0,q.jsx)(B.Z,{onClick:n,children:(0,q.jsx)(A.Z,{})})]})})]})},Q=t(2036),U=t(5179),G=function(e){var r=e.row,t=e.handleEditClick,a=e.handleDeleteClick;return(0,q.jsxs)(L.Z,{children:[(0,q.jsx)(I.Z,{align:"center",children:r.security_id}),(0,q.jsxs)(I.Z,{align:"center",children:[r.weightage_pct,"%"]}),(0,q.jsxs)(I.Z,{align:"center",children:[(0,q.jsx)(B.Z,{onClick:function(e){return t(e,r)},children:(0,q.jsx)(U.Z,{})}),(0,q.jsx)(B.Z,{onClick:a,children:(0,q.jsx)(Q.Z,{})})]})]},r.id)},R=t(4330),V=function(){var e=(0,d.useState)({security:(0,w.LC)(),weightage:(0,w.LC)()}),r=(0,c.Z)(e,2),t=r[0],a=r[1],n=(0,u.I0)(),i=(0,u.v9)((function(e){return e.securityTableData})),o=i.data,_=i.addFormData,g=i.editFormData,h=i.editRowId,m=_.security_id,j=_.weightage_pct,C=(0,u.v9)((function(e){return e.security.data})),A=null===C||void 0===C?void 0:C.map((function(e){return{security_name:e.security_name,security_id:e.security_id}})),O=function(e){e.preventDefault(),n((0,b.uU)((0,s.Z)((0,s.Z)({},_),{},(0,l.Z)({},e.target.name,e.target.value))))},B=function(e){n((0,b.Z$)((0,s.Z)((0,s.Z)({},g),{},(0,l.Z)({},e.target.name,e.target.value))))},Q=function(e,r){e.preventDefault(),n((0,b.YQ)(r.id)),n((0,b.Z$)(r))},U=function(e){e.preventDefault();var r=(0,s.Z)({id:h},g),t=o.map((function(e){return e.id===h?r:e}));n((0,b.a_)(t)),n((0,b.YQ)(null))},V=function(){n((0,b.YQ)(null))};return(0,d.useEffect)((function(){n((0,W.e)())}),[]),(0,q.jsxs)(q.Fragment,{children:[(0,q.jsx)(f.Z,{className:R.Z.addSecurityTable__Container,children:(0,q.jsxs)(f.Z,{component:"form",className:R.Z.addSecurityTable__form,children:[(0,q.jsxs)(f.Z,{className:R.Z.addSecurityTable_selectInput,children:[(0,q.jsxs)(Z.Z,{fullWidth:!0,children:[(0,q.jsx)(y.Z,{children:"Security"}),(0,q.jsx)(x.Z,{name:"security_id",onChange:O,placeholder:"Security",label:"Security",value:m,children:A.map((function(e){return(0,q.jsx)(v.Z,{value:e.security_id,children:"".concat(e.security_id," - ").concat(e.security_name)},e.security_id)}))})]}),t.security.errorState&&(0,q.jsx)("span",{className:"error",children:t.security.errorMessage})]}),(0,q.jsxs)(f.Z,{className:R.Z.addSecurityTable_textInput,children:[(0,q.jsx)(p.Z,{fullWidth:!0,name:"weightage_pct",onChange:O,placeholder:"Weightage",label:"Weightage",value:j,className:"textInput__rightAlighed"}),t.weightage.errorState&&(0,q.jsx)("span",{className:"error",children:t.weightage.errorMessage})]}),(0,q.jsx)(S.Z,{variant:"filled",onClick:function(e){e.preventDefault();var r=(0,s.Z)({id:(0,E.x0)()},_);(function(){var e=!0,r={security:(0,w.LC)(),weightage:(0,w.LC)()};return(0,M.ke)(m)&&(r.security={errorMessage:k.Z.getMandatoryFieldMessage("Security"),errorState:"error"},e=!1),(0,M.ke)(j)&&(r.weightage={errorMessage:k.Z.getMandatoryFieldMessage("Weightage"),errorState:"error"},e=!1),a(r),e})()&&(n((0,b.a_)([].concat((0,P.Z)(o),[r]))),n((0,b.uU)({security_id:"",weightage_pct:""})))},className:R.Z.addSecurityTable__addBtn,shape:"square",children:"Add"})]})}),o.length?(0,q.jsx)(N.Z,{className:R.Z.addSecurityTable_dataTableWrapper,children:(0,q.jsxs)(T.Z,{children:[(0,q.jsx)(F.Z,{children:(0,q.jsx)(L.Z,{children:["Security","Weightage","Action"].map((function(e){return(0,q.jsx)(I.Z,{align:"center",children:e},e)}))})}),(0,q.jsx)(D.Z,{children:null===o||void 0===o?void 0:o.map((function(e){return(0,q.jsx)(q.Fragment,{children:h===e.id?(0,q.jsx)(H,{editFormData:g,handleEditFormChange:B,handleEditFormSubmit:U,handleCancelClick:V,securityOptions:A},e.id):(0,q.jsx)(G,{row:e,handleEditClick:Q,handleDeleteClick:function(){return function(e){var r=o.filter((function(r){return r.id!==e}));n((0,b.a_)(r))}(e.id)}},e.id)})}))})]})}):null]})},Y=t(8459),$=["portfolio_security_id"],J=function(){var e=(0,d.useState)({portfolio_name:"",portfolio_name_ar:"",risk_level:"",avg_growth_pct:""}),r=(0,c.Z)(e,2),t=r[0],n=r[1],P=(0,d.useState)({portfolio_name:(0,w.LC)(),portfolio_name_ar:(0,w.LC)(),avg_growth_pct:(0,w.LC)(),risk_level:(0,w.LC)(),security:(0,w.LC)(),weightage:(0,w.LC)()}),N=(0,c.Z)(P,2),T=N[0],F=N[1],L=t.portfolio_name,I=t.portfolio_name_ar,D=t.avg_growth_pct,E=t.risk_level,W=(0,_.UO)().id,A=(0,_.s0)(),O=(0,u.I0)(),B=(0,u.v9)((function(e){return e.securityTableData.data})),H=null===B||void 0===B?void 0:B.map((function(e){var r=e.security_id,t=e.weightage_pct;return{security_id:r,weightage_pct:parseFloat(t)}})),Q=H.reduce((function(e,r){return e+parseFloat(r.weightage_pct)}),0),U=H.length,G=function(){var e=!0,r={portfolio_name:(0,w.LC)(),portfolio_name_ar:(0,w.LC)(),avg_growth_pct:(0,w.LC)(),risk_level:(0,w.LC)(),security:(0,w.LC)(),weightage:(0,w.LC)()};return(0,M.ke)(L)&&(r.portfolio_name={errorMessage:k.Z.getMandatoryFieldMessage("Portfolio Name"),errorState:"error"},e=!1),(0,M.ke)(I)&&(r.portfolio_name_ar={errorMessage:k.Z.getMandatoryFieldMessage("Portfolio Name Arabic"),errorState:"error"},e=!1),(0,M.ke)(E)&&(r.risk_level={errorMessage:k.Z.getMandatoryFieldMessage("Risk Level"),errorState:"error"},e=!1),(0,M.ke)(D)?(r.avg_growth_pct={errorMessage:k.Z.getMandatoryFieldMessage("Avarage Growth Percentage"),errorState:"error"},e=!1):(0,M.oL)(D)?(r.avg_growth_pct={errorMessage:k.Z.getValueInNumberMessage("Avarage Growth Percentage"),errorState:"error"},e=!1):(0,M.Gs)(D)&&(r.avg_growth_pct={errorMessage:k.Z.getDecimalPointValueMessage("Avarage Growth Percentage"),errorState:"error"},e=!1),U<=0&&(r.security={errorMessage:"Add at least one security",errorState:"error"},e=!1),U&&100!==Q&&(r.weightage={errorMessage:"The sum of weightage of all securities must be 100",errorState:"error"},e=!1),F(r),e},R=function(e){n((0,s.Z)((0,s.Z)({},t),{},(0,l.Z)({},e.target.name,e.target.value)))},J=function(){var e=(0,o.Z)((0,a.Z)().mark((function e(r){var t,o,l,c;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,j.Z.getPortfolioById(r);case 3:t=e.sent,o=t.data,l=o.data.portfolioSecurities,c=l.map((function(e){var r=e.portfolio_security_id,t=i(e,$);return(0,s.Z)({id:r},t)})),n(o.data),O((0,b.a_)(c)),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.error(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(r){return e.apply(this,arguments)}}();(0,d.useEffect)((function(){J(W)}),[]);var z=function(){var e=(0,o.Z)((0,a.Z)().mark((function e(r){var t;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.preventDefault(),t={portfolio_id:W,portfolio_name:L,portfolio_name_ar:I,risk_level:E,avg_growth_pct:parseFloat(D),portfolioSecurities:H},!G()){e.next=6;break}return e.next=6,O((0,C.o9)(t)).unwrap().then((function(e){n(e.data),O((0,b.a_)([])),A("/portfolio/".concat(W))})).catch((function(e){console.error(e)}));case 6:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}();return(0,q.jsx)(q.Fragment,{children:(0,q.jsx)(q.Fragment,{children:(0,q.jsx)(h.ZP,{container:!0,className:"form__gridCenter",children:(0,q.jsx)(h.ZP,{item:!0,xs:12,sm:12,md:8,lg:5,xl:5,children:(0,q.jsxs)(f.Z,{component:"form",onSubmit:z,noValidate:!0,className:Y.Z.addPortfolio__formContainer,children:[(0,q.jsxs)(f.Z,{className:Y.Z.addPortfolio__formStyles,children:[(0,q.jsx)(m.Z,{component:"h1",variant:"h5",className:Y.Z.addPortfolio__formHeading,children:"Update Portfolio"}),(0,q.jsx)(p.Z,{margin:"normal",required:!0,fullWidth:!0,name:"portfolio_name",value:L,label:"Portfolio Name",onChange:function(e){return R(e)},autoComplete:"off",className:"form__textInput"}),T.portfolio_name.errorState&&(0,q.jsx)("span",{className:"error",children:T.portfolio_name.errorMessage}),(0,q.jsx)(p.Z,{margin:"normal",required:!0,fullWidth:!0,name:"portfolio_name_ar",value:I,label:"Portfolio Name Arabic",onChange:function(e){return R(e)},autoComplete:"off",className:"form__textInput textInput__rightAlighed"}),T.portfolio_name_ar.errorState&&(0,q.jsx)("span",{className:"error",children:T.portfolio_name_ar.errorMessage}),(0,q.jsxs)(Z.Z,{fullWidth:!0,className:"form__selectInput",children:[(0,q.jsx)(y.Z,{children:"Risk Level"}),(0,q.jsxs)(x.Z,{value:E,label:"Risk Level",name:"risk_level",onChange:function(e){return R(e)},autoComplete:"off",children:[(0,q.jsx)(v.Z,{value:"low",children:"Low"}),(0,q.jsx)(v.Z,{value:"medium",children:"Medium"}),(0,q.jsx)(v.Z,{value:"high",children:"High"}),(0,q.jsx)(v.Z,{value:"very-high",children:"Very High"})]})]}),T.risk_level.errorState&&(0,q.jsx)("span",{className:"error",children:T.risk_level.errorMessage}),(0,q.jsx)(p.Z,{margin:"normal",required:!0,fullWidth:!0,label:"Avarage Growth Percentage",name:"avg_growth_pct",value:D,onChange:function(e){return R(e)},placeholder:"Enter the value in decimal point like 15.5",autoComplete:"off",className:"form__textInput"}),T.avg_growth_pct.errorState&&(0,q.jsx)("span",{className:"error",children:T.avg_growth_pct.errorMessage})]}),(0,q.jsx)(V,{}),(0,q.jsxs)("div",{className:Y.Z.addPortfolio__errorContainer,children:[T.security.errorState&&(0,q.jsx)("span",{className:"".concat(Y.Z.addPortfolio__tableErrors),children:T.security.errorMessage}),T.weightage.errorState&&(0,q.jsx)("span",{className:"".concat(Y.Z.addPortfolio__tableErrors),children:T.weightage.errorMessage})]}),(0,q.jsxs)("div",{className:"buttons_container",children:[(0,q.jsx)(S.Z,{type:"submit",variant:"filled",className:"form__submitBtn",children:"Update"}),(0,q.jsx)(g.rU,{to:"/portfolio",children:(0,q.jsx)(S.Z,{children:"Cancel"})})]})]})})})})})}}}]);