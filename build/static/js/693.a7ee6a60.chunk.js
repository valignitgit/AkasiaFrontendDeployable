"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[693],{8459:function(e,r){r.Z={addPortfolio__formContainer:"styles_addPortfolio__formContainer__BQkDL",addPortfolio__formStyles:"styles_addPortfolio__formStyles__1T1tY",addPortfolio__formHeading:"styles_addPortfolio__formHeading__uavYS",addPortfolio__errorContainer:"styles_addPortfolio__errorContainer__xvp6I",addPortfolio__tableErrors:"styles_addPortfolio__tableErrors__yZP6E"}},4330:function(e,r){r.Z={addSecurityTable__heading:"styles_addSecurityTable__heading__y6exQ",addSecurityTable__Container:"styles_addSecurityTable__Container__yL4sA",addSecurityTable__form:"styles_addSecurityTable__form__JVmgi",addSecurityTable_selectInput:"styles_addSecurityTable_selectInput__rQafq",addSecurityTable_textInput:"styles_addSecurityTable_textInput__RHBTw",addSecurityTable__addBtn:"styles_addSecurityTable__addBtn__uDhq0"}},7693:function(e,r,t){t.r(r),t.d(r,{default:function(){return Y}});var a=t(4165),n=t(5861),i=t(4942),o=t(1413),l=t(9439),s=t(8391),c=t(774),d=t(8773),u=t(5536),_=t(2600),g=t(461),h=t(5590),f=t(7378),m=t(2872),p=t(7816),Z=t(9856),x=t(8743),y=t(1884),v=t(7236),j=t(6040),C=t(2763),S=t(747),b=t(7067),w=t(3433),k=t(1717),M=t(2557),N=t(8296),P=t(483),T=t(4062),L=t(3387),F=t(125),I=t(3514),D=t(6163),A=t(9222),E=t(5866),W=t(4330),B=t(3712),H=function(e){var r=e.handleEditFormChange,t=e.editFormData,a=e.handleEditFormSubmit,n=e.handleCancelClick,i=e.securityOptions;return(0,B.jsxs)(P.Z,{children:[(0,B.jsx)(T.Z,{align:"center",children:(0,B.jsxs)(m.Z,{sx:{width:"250px"},children:[(0,B.jsx)(p.Z,{children:"Security"}),(0,B.jsx)(Z.Z,{name:"security_id",value:t.security_id,onChange:r,label:"Security",children:i.map((function(e){return(0,B.jsx)(x.Z,{value:e.security_id,children:"".concat(e.security_id," - ").concat(e.security_name)},e.security_id)}))})]})}),(0,B.jsx)(T.Z,{align:"center",children:(0,B.jsx)(f.Z,{fullWidth:!0,name:"weightage_pct",value:t.weightage_pct,onChange:r,placeholder:"Weightage",sx:{width:"100px"}})}),(0,B.jsx)(T.Z,{align:"center",children:(0,B.jsxs)(g.Z,{className:W.Z.securityTable_editBtnContainer,children:[(0,B.jsx)(E.Z,{onClick:function(e){return a(e)},children:(0,B.jsx)(A.Z,{})}),(0,B.jsx)(E.Z,{onClick:n,children:(0,B.jsx)(D.Z,{})})]})})]})},q=t(2036),Q=t(5179),G=function(e){var r=e.row,t=e.handleEditClick,a=e.handleDeleteClick;return(0,B.jsxs)(P.Z,{children:[(0,B.jsx)(T.Z,{align:"center",children:r.security_id}),(0,B.jsxs)(T.Z,{align:"center",children:[r.weightage_pct,"%"]}),(0,B.jsxs)(T.Z,{align:"center",children:[(0,B.jsx)(E.Z,{onClick:function(e){return t(e,r)},children:(0,B.jsx)(Q.Z,{})}),(0,B.jsx)(E.Z,{onClick:a,children:(0,B.jsx)(q.Z,{})})]})]},r.id)},R=function(){var e=(0,s.useState)({security:(0,C.LC)(),weightage:(0,C.LC)()}),r=(0,l.Z)(e,2),t=r[0],a=r[1],n=(0,c.I0)(),d=(0,c.v9)((function(e){return e.securityTableData})),u=d.data,_=d.addFormData,h=d.editFormData,v=d.editRowId,D=_.security_id,A=_.weightage_pct,E=(0,c.v9)((function(e){return e.security.data})).map((function(e){return{security_name:e.security_name,security_id:e.security_id}})),q=function(e){e.preventDefault(),n((0,j.uU)((0,o.Z)((0,o.Z)({},_),{},(0,i.Z)({},e.target.name,e.target.value))))},Q=function(e){n((0,j.Z$)((0,o.Z)((0,o.Z)({},h),{},(0,i.Z)({},e.target.name,e.target.value))))},R=function(e,r){e.preventDefault(),n((0,j.YQ)(r.id)),n((0,j.Z$)(r))},V=function(e){e.preventDefault();var r=(0,o.Z)({id:v},h),t=u.map((function(e){return e.id===v?r:e}));n((0,j.a_)(t)),n((0,j.YQ)(null))},Y=function(){n((0,j.YQ)(null))};return(0,s.useEffect)((function(){n((0,I.e)())}),[]),(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)(g.Z,{className:W.Z.addSecurityTable__Container,children:(0,B.jsxs)(g.Z,{component:"form",className:W.Z.addSecurityTable__form,children:[(0,B.jsxs)(g.Z,{className:W.Z.addSecurityTable_selectInput,children:[(0,B.jsxs)(m.Z,{fullWidth:!0,children:[(0,B.jsx)(p.Z,{children:"Security"}),(0,B.jsx)(Z.Z,{name:"security_id",onChange:q,placeholder:"Security",label:"Security",value:D,children:E.map((function(e){return(0,B.jsx)(x.Z,{value:e.security_id,children:"".concat(e.security_id," - ").concat(e.security_name)},e.security_id)}))})]}),t.security.errorState&&(0,B.jsx)("span",{className:"error",children:t.security.errorMessage})]}),(0,B.jsxs)(g.Z,{className:W.Z.addSecurityTable_textInput,children:[(0,B.jsx)(f.Z,{fullWidth:!0,name:"weightage_pct",onChange:q,placeholder:"Weightage",label:"Weightage",value:A,className:"textInput__rightAlighed"}),t.weightage.errorState&&(0,B.jsx)("span",{className:"error",children:t.weightage.errorMessage})]}),(0,B.jsx)(y.Z,{variant:"filled",onClick:function(e){e.preventDefault();var r=(0,o.Z)({id:(0,F.x0)()},_);(function(){var e=!0,r={security:(0,C.LC)(),weightage:(0,C.LC)()};return(0,b.ke)(D)&&(r.security={errorMessage:S.Z.getMandatoryFieldMessage("Security"),errorState:"error"},e=!1),(0,b.ke)(A)&&(r.weightage={errorMessage:S.Z.getMandatoryFieldMessage("Weightage"),errorState:"error"},e=!1),a(r),e})()&&(n((0,j.a_)([].concat((0,w.Z)(u),[r]))),n((0,j.uU)({security_id:"",weightage_pct:""})))},className:W.Z.addSecurityTable__addBtn,shape:"square",children:"Add"})]})}),u.length?(0,B.jsx)(k.Z,{className:W.Z.addSecurityTable_dataTableWrapper,children:(0,B.jsxs)(M.Z,{children:[(0,B.jsx)(N.Z,{children:(0,B.jsx)(P.Z,{children:["Security","Weightage","Action"].map((function(e){return(0,B.jsx)(T.Z,{align:"center",children:e},e)}))})}),(0,B.jsx)(L.Z,{children:null===u||void 0===u?void 0:u.map((function(e){return(0,B.jsx)(B.Fragment,{children:v===e.id?(0,B.jsx)(H,{editFormData:h,handleEditFormChange:Q,handleEditFormSubmit:V,handleCancelClick:Y,securityOptions:E}):(0,B.jsx)(G,{row:e,handleEditClick:R,handleDeleteClick:function(){return function(e){var r=u.filter((function(r){return r.id!==e}));n((0,j.a_)(r))}(e.id)}})})}))})]})}):null]})},V=t(8459),Y=function(){var e=(0,s.useState)({portfolio_name:"",portfolio_name_ar:"",avg_growth_pct:"",risk_level:""}),r=(0,l.Z)(e,2),t=r[0],w=r[1],k=(0,s.useState)({portfolio_name:(0,C.LC)(),portfolio_name_ar:(0,C.LC)(),avg_growth_pct:(0,C.LC)(),risk_level:(0,C.LC)(),security:(0,C.LC)(),weightage:(0,C.LC)()}),M=(0,l.Z)(k,2),N=M[0],P=M[1],T=t.portfolio_name,L=t.portfolio_name_ar,F=t.avg_growth_pct,I=t.risk_level,D=(0,d.s0)(),A=(0,c.I0)(),E=(0,c.v9)((function(e){return e.securityTableData.data})),W=E.map((function(e){var r=e.security_id,t=e.weightage_pct;return{security_id:r,weightage_pct:parseFloat(t)}})),H=W.reduce((function(e,r){return e+parseFloat(r.weightage_pct)}),0),q=W.length,Q=function(e){w((0,o.Z)((0,o.Z)({},t),{},(0,i.Z)({},e.target.name,e.target.value)))},G=function(){var e=!0,r={portfolio_name:(0,C.LC)(),portfolio_name_ar:(0,C.LC)(),avg_growth_pct:(0,C.LC)(),risk_level:(0,C.LC)(),security:(0,C.LC)(),weightage:(0,C.LC)()};return(0,b.ke)(T)&&(r.portfolio_name={errorMessage:S.Z.getMandatoryFieldMessage("Portfolio Name"),errorState:"error"},e=!1),(0,b.ke)(L)&&(r.portfolio_name_ar={errorMessage:S.Z.getMandatoryFieldMessage("Portfolio Name Arabic"),errorState:"error"},e=!1),(0,b.ke)(I)&&(r.risk_level={errorMessage:S.Z.getMandatoryFieldMessage("Risk Level"),errorState:"error"},e=!1),(0,b.ke)(F)?(r.avg_growth_pct={errorMessage:S.Z.getMandatoryFieldMessage("Avarage Growth Percentage"),errorState:"error"},e=!1):(0,b.oL)(F)?(r.avg_growth_pct={errorMessage:S.Z.getValueInNumberMessage("Avarage Growth Percentage"),errorState:"error"},e=!1):(0,b.Gs)(F)&&(r.avg_growth_pct={errorMessage:S.Z.getDecimalPointValueMessage("Avarage Growth Percentage"),errorState:"error"},e=!1),E.length>0?r.security=(0,C.LC)():q<=0&&(r.security={errorMessage:"Add at least one security",errorState:"error"},e=!1),q&&100!==H&&(r.weightage={errorMessage:"The sum of weightage of all securities must be 100",errorState:"error"},e=!1),P(r),e};(0,s.useEffect)((function(){A((0,j.a_)([]))}),[]);var Y=function(){var e=(0,n.Z)((0,a.Z)().mark((function e(r){var n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.preventDefault(),n=(0,o.Z)((0,o.Z)({},t),{},{portfolioSecurities:W}),!G()){e.next=14;break}return e.prev=4,e.next=7,A((0,v.JH)(n)).unwrap();case 7:e.sent.data&&D("/portfolio"),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(4),console.error(e.t0);case 14:case"end":return e.stop()}}),e,null,[[4,11]])})));return function(r){return e.apply(this,arguments)}}();return(0,B.jsx)(B.Fragment,{children:(0,B.jsx)(B.Fragment,{children:(0,B.jsx)(_.ZP,{container:!0,className:"form__gridCenter",children:(0,B.jsx)(_.ZP,{item:!0,xs:12,sm:12,md:8,lg:5,xl:5,children:(0,B.jsxs)(g.Z,{component:"form",onSubmit:Y,noValidate:!0,className:V.Z.addPortfolio__formContainer,children:[(0,B.jsxs)(g.Z,{className:V.Z.addPortfolio__formStyles,children:[(0,B.jsx)(h.Z,{component:"h1",variant:"h5",className:V.Z.addPortfolio__formHeading,children:"Add Portfolio"}),(0,B.jsx)(f.Z,{margin:"normal",required:!0,fullWidth:!0,name:"portfolio_name",value:T,label:"Portfolio Name",onChange:function(e){return Q(e)},autoComplete:"off",className:"form__textInput"}),N.portfolio_name.errorState&&(0,B.jsx)("span",{className:"error",children:N.portfolio_name.errorMessage}),(0,B.jsx)(f.Z,{margin:"normal",required:!0,fullWidth:!0,name:"portfolio_name_ar",value:L,label:"Portfolio Name Arabic",onChange:function(e){return Q(e)},autoComplete:"off",className:"form__textInput textInput__rightAlighed"}),N.portfolio_name_ar.errorState&&(0,B.jsx)("span",{className:"error",children:N.portfolio_name_ar.errorMessage}),(0,B.jsxs)(m.Z,{fullWidth:!0,className:"form__selectInput",children:[(0,B.jsx)(p.Z,{children:"Risk Level"}),(0,B.jsxs)(Z.Z,{value:I,label:"Risk Level",name:"risk_level",onChange:function(e){return Q(e)},autoComplete:"off",children:[(0,B.jsx)(x.Z,{value:"low",children:"Low"}),(0,B.jsx)(x.Z,{value:"medium",children:"Medium"}),(0,B.jsx)(x.Z,{value:"high",children:"High"}),(0,B.jsx)(x.Z,{value:"very-high",children:"Very High"})]})]}),N.risk_level.errorState&&(0,B.jsx)("span",{className:"error",children:N.risk_level.errorMessage}),(0,B.jsx)(f.Z,{margin:"normal",required:!0,fullWidth:!0,label:"Avarage Growth Percentage",name:"avg_growth_pct",value:F,onChange:function(e){return Q(e)},placeholder:"Enter the value in decimal point like 15.5",autoComplete:"off",className:"form__textInput textInput__rightAlighed"}),N.avg_growth_pct.errorState&&(0,B.jsx)("span",{className:"error",children:N.avg_growth_pct.errorMessage})]}),(0,B.jsx)(R,{}),(0,B.jsxs)("div",{className:V.Z.addPortfolio__errorContainer,children:[N.security.errorState&&(0,B.jsx)("span",{className:"".concat(V.Z.addPortfolio__tableErrors),children:N.security.errorMessage}),N.weightage.errorState&&(0,B.jsx)("span",{className:"".concat(V.Z.addPortfolio__tableErrors),children:N.weightage.errorMessage})]}),(0,B.jsxs)("div",{className:"buttons_container",children:[(0,B.jsx)(y.Z,{type:"submit",variant:"filled",className:V.Z.addPortfolio__submitBtn,children:"Submit"}),(0,B.jsx)(u.rU,{to:"/portfolio",children:(0,B.jsx)(y.Z,{children:"Cancel"})})]})]})})})})})}}}]);